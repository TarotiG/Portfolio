@page
@using System.Text.Encodings.Web
@model IndexModel
@{
    ViewData["Title"] = "Home page";
}
<section id="projects" class="py-16 bg-gray-900">
    <div class="max-w-6xl mx-auto px-6">
        <!--max-w-xl mx-auto px-6 text-center"  "max-w-6xl mx-auto px-6"-->
        <h3 class="text-3xl font-semibold mb-8 text-center">📁 Uitgelichte projecten</h3>
        <div id="list-projecten" class="grid md:grid-cols-2 gap-8">
            @foreach (var project in Model.Projecten)
            {
                var nameProj = JavaScriptEncoder.Default.Encode(project.Name);
                var descriptionProj = JavaScriptEncoder.Default.Encode(project.Description);
                <div class="bg-gray-800 p-6 rounded-lg shadow-md">
                    <h4 class="text-xl font-bold">@project.Name</h4>
                    <p class="text-gray-400 mt-2">@project.Description</p>
                    <a href="#demo-project" class="text-blue-400 hover:underline mt-2 inline-block" onclick="loadProject('@nameProj', '@descriptionProj')" data-bs-toggle="modal" data-bs-target="#projectModal">Bekijk project →</a>
                </div>
            }
        </div>
    </div>
</section>

<!-- Modal pop up -->
<div class="modal fade" id="projectModal">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">

            <div class="flex flex-col md:flex-row gap-4 p-6 bg-gray-800 rounded-lg shadow-lg">
                <!-- Sidebar (links) -->
                <div class="bg-gray-700 p-4 rounded-lg">
                    <h4 id="project-name" class="text-2xl font-bold mb-2 text-white"></h4>
                    <p id="project-desc" class="text-gray-300"></p>
                    <br />
                    @* <a href="/" onclick="executeProjectDemo()" class="text-blue-400 hover:underline mt-2 inline-block">
                        Show project demo →
                    </a> *@
                    <br/>
                    <a href="/" onclick="exitProject()" class="text-blue-400 hover:underline mt-2 inline-block">
                        Exit project details →
                    </a>
                </div>

                <!-- Project iframe (rechts) -->
                <div class="md:w-3/4">
                    <h3 class="text-2xl text-white font-bold mb-2">Code Example</h3>
                    <iframe id="project-iframe"
                            src="/projecten/mock-website/home.html"
                            class="w-full h-[800px] border border-gray-500 rounded-lg"
                            style="height: 690px;"
                            loading="lazy"></iframe>
                </div>

            </div>

        </div>
    </div>
</div>

@section Scripts {
    <script>
        function loadProject(name, description) {
            const section = document.getElementById('projectModal');

            hideProjectSection();

            section.hidden = false;
            section.style.display = "block";

            document.getElementById('project-name').textContent = name;
            document.getElementById('project-desc').textContent = description;

        }

        // function executeProjectDemo() {
        //     const projectDemo = document.getElementById('project-iframe');
        //     const projectDesc = document.getElementById('project-desc');


        //     projectDesc.hidden 
        //     projectDemo.hidden = false;
        //     projectDemo.style.display = "block";

        //     document.getElementById('project-iframe').src = "/projecten/mock-website/home.html";
        // }

        function hideProjectSection() {
            const projectSection = document.getElementById("projects");
            projectSection.hidden = true;
        }

        function exitProject(e) {
            e.preventDefault();
            let project = document.getElementById("demo-project");
            let projectenSection = document.getElementById("projects");

            project.hidden = true;
            projectenSection.hidden = false;
        }
    </script>
}